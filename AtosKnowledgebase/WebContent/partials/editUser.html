<h2>Edit User</h2>
<form id="editForm" class="form-horizontal" role="form" action="rest/user/updateUser" onsubmit="return(askConfirm())" method="post">
	<table id="registerField" class="table_type_01">
		<tr>
			<td><label>A/NL number</label></td>
			<td><input id="id" type="text" value="{{user.id}}" name="id" readonly/></td>
		</tr>
		<tr>
			<td><label>Firstname *</label></td> 
			<td><input id="fn" type="text" value="{{user.firstName}}" name="fn" required pattern="^[a-zA-Z][a-zA-Z-_\. ]{1,30}$" oninvalid="setCustomValidity('* required \nPlease enter your firstname ')"  onchange="try{setCustomValidity('')}catch(e){}"/></td>
		</tr>
		<tr>
			<td><label>Middlename</label></td>
			<td><input  id="mn" type="text" value="{{user.middleName}}" name="mn" pattern="^[a-zA-Z][a-zA-Z-_\. ]{1,30}$"/></td>
		</tr>
		<tr>
			<td><label>Surname *</label></td> 
			<td><input id="ln" type="text" value="{{user.surName}}" name="ln" required pattern="^[a-zA-Z][a-zA-Z-_\. ]{1,30}$" oninvalid="setCustomValidity('* required \nPlease enter your surname ')"  onchange="try{setCustomValidity('')}catch(e){}"/></td>
		</tr>
		<tr>
			<td><label>Date of Birth</label></td>
			<td><input id="dob" type="text" value="{{user.geboorteDatum}}" name="dob" placeholder="dd-mm-jjjj"  pattern="^[0-9]{2}[-][0-9]{2}[-][0-9]{4}$"/></td>
		</tr>
		<tr>
			<td><label>Function</label></td>
			<td><input id="func" type="text" value="{{user.function}}" name="func"  pattern="^[a-zA-Z][a-zA-Z-_\. ]{1,30}$"/></td>
		</tr>			
		<tr>
			<td><label>Competences</label></td>
			<td><select id="select-to" name="comp" class="contacts" data-placeholder="Select competences" style="width:350px;"></select></td>
		</tr>
		<tr>
			<td><label>VIP</label></td>
			<td>
				Ja <input type="radio" name="vip" value="true" /> 
				| Nee <input type="radio" name="vip" value="false" checked/>
			</td>
		</tr>	
		<tr>
			<td colspan="2">
				<input type="submit" class="ui-button-text" value="Edit user" />
				<div id="dialog-confirm"></div>
			</td>
		</tr>
		<tr>
			<td colspan="2" class="information">
				* required fields
			</td>
		</tr>
	</table>		
</form>
<script>
var isEdited = false;

function proceed(){
	isEdited = true;
	setTimeout(function(){ document.forms["editForm"].submit(); }, 100);
	setTimeout(function(){ window.location.href = "#/userList"; }, 100);
};

function askConfirm(){
	if(!isEdited){
		$("#dialog-confirm").html("Do you want to edit user?");
		$("#dialog-confirm").dialog({
			resizable: false,
			modal: true,
			title: "Edit user",
			height: 150,
			width: 200,
			buttons: {			
				"Yes": function () {
					proceed();		
					$(this).dialog('close');
				},
                "No": function () {
                	$(this).dialog('close');
                }
			}
		});	
	} 
	return false;
};	
</script>
